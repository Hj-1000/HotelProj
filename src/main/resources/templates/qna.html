<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- 문자 인코딩 설정 -->
    <meta charset="UTF-8">
    <!-- 화면 크기에 맞게 조정하는 뷰포트 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q&A 페이지</title>
    <style>
        /* 전체 페이지 크기 및 스타일 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* padding과 border를 width와 height에 포함시킴 */
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4; /* 배경 색상 */
            height: 100vh; /* 화면 전체 크기를 차지하도록 설정 */
        }

        .container {
            width: 100%;
            height: 100%;
            max-width: 1200px; /* 최대 너비를 설정 */
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
            overflow: auto; /* 내용이 넘칠 경우 스크롤이 생기도록 설정 */
        }

        h1 {
            text-align: center;
            color: #333; /* 제목 색상 */
        }

        /* 검색 바 스타일 */
        .search-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 10px;
        }

        .search-bar select, .search-bar input {
            padding: 10px;
            flex: 1;
            border: 1px solid #ddd; /* 테두리 색상 */
            border-radius: 5px; /* 테두리 둥글게 */
        }

        .search-bar button {
            padding: 10px 20px;
            background-color: #5cb85c; /* 버튼 색상 */
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .search-bar button:hover {
            background-color: #4cae4c; /* 버튼 hover 효과 */
        }

        /* 질문 작성 폼 스타일 */
        .question-form {
            margin-bottom: 30px;
        }

        .question-form h3 {
            margin-bottom: 10px;
        }

        .question-form input, .question-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .question-form button {
            padding: 10px 20px;
            background-color: #337ab7; /* 버튼 색상 */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .question-form button:hover {
            background-color: #286090; /* 버튼 hover 효과 */
        }

        /* 질문 목록 스타일 */
        .question-list {
            list-style: none;
            padding: 0;
        }

        .question-item {
            background-color: #e9e9e9; /* 배경 색상 */
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }

        .question-item h3 {
            margin: 0 0 5px;
        }

        .question-item p {
            margin: 0;
            color: #555; /* 내용 색상 */
        }

        /* 페이징 처리 버튼 스타일 */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .pagination button {
            padding: 10px;
            margin: 0 5px;
            background-color: #ddd; /* 버튼 배경 색상 */
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .pagination button:hover {
            background-color: #bbb; /* 버튼 hover 효과 */
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Q&A 페이지</h1>

    <!-- 검색 바 (질문을 제목이나 내용으로 검색할 수 있는 기능) -->
    <div class="search-bar">
        <select id="searchCategory">
            <option value="">-- 검색선택 --</option>
            <option value="title">제목</option>
            <option value="content">내용</option>
        </select>
        <input type="text" id="searchInput" placeholder="검색어를 입력하세요">
        <button onclick="searchQuestions()">검색</button>
    </div>

    <!-- 질문 작성 폼 (질문을 작성하고 제출할 수 있는 폼) -->
    <div class="question-form">
        <h3>질문을 남기세요</h3>
        <form id="questionForm">
            <input type="text" id="questionTitle" placeholder="제목을 입력하세요" required>
            <textarea id="questionContent" placeholder="내용을 입력하세요" required></textarea>
            <button type="submit">질문 제출</button>
        </form>
    </div>

    <!-- 질문 목록 (등록된 질문들이 나열되는 영역) -->
    <div class="questions">
        <h3>질문 목록</h3>
        <ul class="question-list" id="questionList"></ul>
        <!-- 페이징 버튼 (페이지 넘버링을 위한 버튼들) -->
        <div id="questionPagination" class="pagination"></div>
    </div>
</div>

<script>
    // 질문 목록을 담을 변수 초기화
    let questionId = 0;
    let currentQuestionPage = 1;
    let questionsPerPage = 5;
    let questions = [];

    // 질문 목록을 화면에 표시하고 페이징 처리
    function displayQuestions(filteredQuestions = null) {
        const questionList = document.getElementById('questionList');
        const questionPagination = document.getElementById('questionPagination');

        const dataToShow = filteredQuestions || questions;

        questionList.innerHTML = ''; // 기존 목록을 비우고 새로운 목록을 추가

        // 페이지에 맞는 질문 범위 설정
        const startIndex = (currentQuestionPage - 1) * questionsPerPage;
        const endIndex = Math.min(startIndex + questionsPerPage, dataToShow.length);

        // 질문 목록을 화면에 추가
        for (let i = startIndex; i < endIndex; i++) {
            const question = dataToShow[i];
            const questionItem = document.createElement('li');
            questionItem.classList.add('question-item');
            questionItem.innerHTML = `<h3>${question.title}</h3><p>${question.content}</p>`;
            questionList.appendChild(questionItem);
        }

        // 페이지 버튼 추가
        const totalPages = Math.ceil(dataToShow.length / questionsPerPage);
        questionPagination.innerHTML = '';
        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('button');
            pageButton.textContent = i;
            pageButton.onclick = () => {
                currentQuestionPage = i; // 페이지 변경
                displayQuestions(filteredQuestions); // 페이지 갱신
            };
            questionPagination.appendChild(pageButton);
        }
    }

    // 질문 제출 처리 (폼을 통해 입력된 질문을 목록에 추가)
    document.getElementById('questionForm').addEventListener('submit', function (event) {
        event.preventDefault(); // 폼 기본 제출 동작 방지

        const questionTitle = document.getElementById('questionTitle').value;
        const questionContent = document.getElementById('questionContent').value;
        if (questionTitle.trim() === '' || questionContent.trim() === '') return; // 제목과 내용이 빈 경우 처리 안 함

        questionId++;
        questions.push({
            id: questionId,
            title: questionTitle,
            content: questionContent
        });

        document.getElementById('questionTitle').value = ''; // 제목 입력 필드 초기화
        document.getElementById('questionContent').value = ''; // 내용 입력 필드 초기화
        displayQuestions(); // 페이지 갱신
    });

    // 질문 검색 처리 (검색어로 질문을 필터링)
    function searchQuestions() {
        const category = document.getElementById('searchCategory').value;
        const keyword = document.getElementById('searchInput').value.toLowerCase();

        if (!category || !keyword) {
            displayQuestions(); // 검색어 없으면 모든 질문 표시
            return;
        }

        const filteredQuestions = questions.filter(question => {
            if (category === 'title') {
                return question.title.toLowerCase().includes(keyword);
            } else if (category === 'content') {
                return question.content.toLowerCase().includes(keyword);
            }
            return false;
        });

        displayQuestions(filteredQuestions); // 필터링된 질문 목록 표시
    }

    // 페이지 로드 시 초기 질문 목록 표시
    displayQuestions();
</script>
</body>
</html>
