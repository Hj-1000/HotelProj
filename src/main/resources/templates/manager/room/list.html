<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <meta charset="UTF-8">
    <title>객실 목록</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="container py-5">
            <h1 class="text-center mb-5">객실 목록</h1>

            <!-- 객실 목록 테이블 -->
            <table class="table table-bordered table-hover">
                <thead class="table-dark">
                <tr>
                    <th scope="col">객실 ID</th>
                    <th scope="col">객실 이름</th>
                    <th scope="col">객실 타입</th>
                    <th scope="col">가격</th>
                    <th scope="col">상태</th>
                    <th scope="col">기능</th>
                </tr>
                </thead>
                <tbody>

                <tr th:each="room : ${list.content}">
                    <td th:text="${room.roomId}"></td>
                    <td th:text="${room.roomName}"></td>
                    <td th:text="${room.roomType}"></td>
                    <td th:text="${room.formattedRoomPrice} + ' KRW'"></td>
                    <td>
                        <span th:if="${room.roomStatus != null and room.roomStatus}" class="badge bg-success">Available</span>
                        <span th:if="${room.roomStatus == null or !room.roomStatus}" class="badge bg-danger">Unavailable</span>
                    </td>
                    <td>
                        <a th:href="@{/manager/room/{roomId}(roomId=${room.roomId})}" class="btn btn-info btn-sm">보기</a>
                        <a th:href="@{/manager/room/update/{roomId}(roomId=${room.roomId})}" class="btn btn-warning btn-sm">수정</a>
                        <a th:href="@{/manager/room/delete/{roomId}(roomId=${room.roomId})}"
                           onclick="return confirm('진짜로 삭제할꺼야?')"
                           class="btn btn-danger btn-sm">삭제</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="mt-3 d-flex justify-content-center">
            <ul class="pagination">
                <!-- 처음 페이지 -->
                <li class="page-item" th:if="${currentPage > 1}">
                    <a class="page-link" th:href="@{/manager/room/list(page=0)}">처음</a> <!-- Spring Data JPA에서 첫 페이지는 0 -->
                </li>

                <!-- 이전 페이지 -->
                <li class="page-item" th:if="${currentPage > 1}">
                    <a class="page-link" th:href="@{/manager/room/list(page=${currentPage - 2})}">이전</a>
                </li>

                <!-- 페이지 번호 -->
                <span th:each="page : ${#numbers.sequence(startPage, endPage)}">
                    <li class="page-item" th:classappend="${currentPage == page} ? 'active'">
                        <a class="page-link" th:href="@{/manager/room/list(page=${page - 1})}" th:text="${page}"></a>
                    </li>
                </span>

                <!-- 다음 페이지 -->
                <li class="page-item" th:if="${currentPage < lastPage}">
                    <a class="page-link" th:href="@{/manager/room/list(page=${currentPage})}">다음</a>
                </li>

                <!-- 마지막 페이지 -->
                <li class="page-item" th:if="${currentPage < lastPage}">
                    <a class="page-link" th:href="@{/manager/room/list(page=${lastPage - 1})}">마지막</a>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>