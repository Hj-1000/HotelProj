<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
<head>
    <meta charset="UTF-8">
    <title>NTT호텔</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/user.css}">
</head>
<body>
<div th:replace="~{fragments/header::header}"></div>
<!--본문-->
<div layout:fragment="content">
    <!-- 배너 -->
    <section class="text-center bg-light">
        <div id="bannerCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
            <div class="bnr_wrapper carousel-inner">
                <div class="carousel-item active">
                    <img src="/img/bg_wedding.jpg" class="d-block w-100" alt="Wedding">
                </div>
                <div class="carousel-item">
                    <img src="/img/bg_dining.jpg" class="d-block w-100" alt="Dining">
                </div>
                <div class="carousel-item">
                    <img src="/img/bg_membership.jpg" class="d-block w-100" alt="Membership">
                </div>
                <div class="carousel-item">
                    <img src="/img/bg_activity.jpg" class="d-block w-100" alt="Activity">
                </div>
            </div>
            <!-- 슬라이드 버튼 -->
            <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
            <!-- 슬라이드 인디케이터 -->
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
            </div>
        </div>
    </section>

    <!-- 추천 룸 섹션 -->
    <section class="py-5">
        <div class="container">
            <!-- 섹션 제목과 More 버튼 배치 -->
            <div class="d-flex justify-content-between align-items-center mb-5">
                <h2 class="text-center flex-grow-1">추천 객실</h2>
                <a href="/roomList" class="btn btn-outline-primary ms-auto">More</a>
            </div>

            <!-- 추천 방이 있을 경우 -->
            <div th:if="${recommendedRooms != null and !#lists.isEmpty(recommendedRooms)}" class="row">
                <div class="col-md-3" th:each="room : ${recommendedRooms}">
                    <div class="card image-hover-container">
                        <div class="image-container">
                            <!-- 이미지 -->
                            <img th:if="${!#lists.isEmpty(room.roomImageDTOList)}"
                                 th:src="@{'/upload/' + ${room.roomImageDTOList[0].imagePath}}"
                                 class="card-img-top"
                                 th:alt="${room.roomName}" />
                            <!-- 이미지가 없을 경우 기본 이미지 -->
                            <img th:if="${#lists.isEmpty(room.roomImageDTOList)}"
                                 src="/img/default_img.jpg"
                                 class="card-img-top"
                                 alt="Default Room Image" />
                            <!-- Hover 시 나타나는 예약 버튼 -->
                            <div class="hover-overlay">
                                <a href="#" class="btn btn-hover">예약하기</a>
                            </div>
                        </div>
                        <div class="card-body text-left">
                            <!-- 상태 버튼 -->
                            <div style="display: flex; gap: 5px; margin-bottom: 10px;">
                                <span th:text="(${room.roomStatus} ? '예약 가능' : '예약 불가')"
                                      class="badge"
                                      th:classappend="${room.roomStatus} ? 'bg-success text-white' : 'bg-danger text-white'">
                                </span>
                                <!-- 객실 타입 버튼 -->
                                <span th:text="${room.roomType}"
                                      class="badge bg-dark text-white">
                                </span>
                            </div>
                            <h5 th:text="${room.roomName}" class="card-title">객실 이름</h5>
                            <p th:text="'예약 기간: ' + ${room.reservationStart} + ' ~ ' + ${room.reservationEnd}" class="card-text">예약 기간</p>
                            <p th:text="'숙박 기간: ' + ${room.stayStart} + ' ~ ' + ${room.stayEnd}" class="card-text">숙박 기간</p>
                            <p th:text="${room.formattedRoomPrice} + ' ' " class="card-text money"> 0 KRW</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 추천 방이 없을 경우 -->
            <div th:if="${recommendedRooms == null or #lists.isEmpty(recommendedRooms)}" class="text-center mt-4">
                <p class="text-muted">추천 방 목록이 없습니다.</p>
            </div>
        </div>
    </section>

    <!-- 지도 섹션 -->
    <section class="text-center py-5 bg-light">
        <div class="container">
            <div class="bg-secondary text-white py-5" style="height: 300px;">지도 이미지</div>
        </div>
    </section>
</div>
<div th:replace="~{fragments/footer::footer}"></div>
</body>
</html>